@startuml Pipeline_Procesamiento_Sistema_Navegacion
!theme plain
title Pipeline de Procesamiento - Sistema de Navegación Asistida

skinparam componentStyle rectangle
skinparam backgroundColor white
skinparam shadowing false

' Componentes principales
component "Aria Glasses" as Aria #LightBlue
component "Observer" as Observer #LightGreen
component "NavigationPipeline" as Pipeline #LightYellow
component "DecisionEngine" as Decision #Orange
component "AudioRouter" as Router #Pink
component "TTS" as TTS #Lavender
actor "Usuario" as User #White

' Componentes SLAM paralelos
component "SLAM Workers\n(paralelo)" as SLAM #LightGray
component "SlamAudioRouter" as SlamRouter #LightPink

' Flujo principal RGB
Aria -down-> Observer : "RGB Frame\n60 FPS"
Observer -down-> Pipeline : "Frame RGB"
Pipeline -down-> Decision : "Detections\n+ Depth Map"
Decision -down-> Router : "Priority Object"
Router -down-> TTS : "Audio Command"
TTS -down-> User : "Comando Voz"

' Flujo paralelo SLAM
Observer -down-> SLAM : "SLAM1/SLAM2\n10 FPS/cam"
SLAM -right-> SlamRouter : "Peripheral Events"
SlamRouter -up-> Router : "SLAM Commands"

' Notas explicativas
note right of Pipeline
  **Procesamiento RGB:**
  1. ImageEnhancer (CLAHE)
  2. DepthEstimator (cada 10 frames)
  3. YoloProcessor (detección)
end note

note right of SLAM
  **Threading Dedicado:**
  - SLAM1 (izquierda)
  - SLAM2 (derecha)
  - Eventos periféricos
end note

note bottom of Router
  **Priority Queue Compartida:**
  - RGB (alta prioridad)
  - SLAM (prioridad dinámica)
  - Cooldown por fuente
end note

@enduml